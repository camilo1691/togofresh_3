<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToGo - Módulo de Usuarios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .navbar {
            background-color: #2c3e50;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .navbar-brand {
            font-size: 1.5em;
            font-weight: bold;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .username {
            font-weight: bold;
        }
        .logout-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .logout-btn:hover {
            background-color: #c0392b;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #444;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .form-section {
            margin-bottom: 20px;
        }
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .form-group {
            flex: 1;
            min-width: 200px;
            margin-right: 15px;
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"],
        input[type="email"],
        input[type="password"],
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .permissions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .permission-group {
            flex: 1;
            min-width: 150px;
        }
        .permission-item {
            margin-bottom: 8px;
        }
        .permission-item label {
            font-weight: normal;
            cursor: pointer;
        }
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-primary {
            background-color: #4CAF50;
            color: white;
        }
        .btn-secondary {
            background-color: #f44336;
            color: white;
        }
        .status-message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .success {
            background-color: #dff0d8;
            color: #3c763d;
        }
        .error {
            background-color: #f2dede;
            color: #a94442;
        }
        .warning {
            background-color: #fcf8e3;
            color: #8a6d3b;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="navbar-brand">ToGo.</div>
        <div class="user-info">
            <span class="username">Bienvenido, <span id="displayUsername">Admin</span></span>
            <button class="logout-btn" id="logoutBtn">Cerrar sesión</button>
        </div>
    </div>
    
    <div class="container">
        <h2>Crear Usuario</h2>
        
        <form id="userForm">
            <div class="form-section">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nombres">Nombres</label>
                        <input type="text" id="nombres" name="nombres" required>
                    </div>
                    <div class="form-group">
                        <label for="apellidos">Apellidos</label>
                        <input type="text" id="apellidos" name="apellidos" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="identificacion">Identificación</label>
                        <input type="text" id="identificacion" name="identificacion" required>
                    </div>
                    <div class="form-group">
                        <label for="username">Nombre de usuario</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Correo electrónico</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="rol">Rol asignado</label>
                    <select id="rol" name="rol" required>
                        <option value="">Seleccione un rol</option>
                        <option value="admin">Administrador</option>
                        <option value="ventas">Ventas</option>
                        <option value="compras">Compras</option>
                        <option value="inventario">Inventario</option>
                    </select>
                </div>
            </div>
            
            <div class="form-section">
                <h3>Permisos</h3>
                <div class="permissions">
                    <div class="permission-group">
                        <h4>VENTAS</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="ventas-crear" name="permisos[]" value="ventas-crear">
                            <label for="ventas-crear">Crear ventas</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="ventas-editar" name="permisos[]" value="ventas-editar">
                            <label for="ventas-editar">Editar ventas</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="ventas-eliminar" name="permisos[]" value="ventas-eliminar">
                            <label for="ventas-eliminar">Eliminar ventas</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>COMPRAS</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="compras-crear" name="permisos[]" value="compras-crear">
                            <label for="compras-crear">Crear compras</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="compras-editar" name="permisos[]" value="compras-editar">
                            <label for="compras-editar">Editar compras</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="compras-eliminar" name="permisos[]" value="compras-eliminar">
                            <label for="compras-eliminar">Eliminar compras</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>INVENTARIOS</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="inventario-ver" name="permisos[]" value="inventario-ver">
                            <label for="inventario-ver">Ver inventario</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="inventario-actualizar" name="permisos[]" value="inventario-actualizar">
                            <label for="inventario-actualizar">Actualizar inventario</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="inventario-ajustes" name="permisos[]" value="inventario-ajustes">
                            <label for="inventario-ajustes">Realizar ajustes</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>REPORTES</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="reportes-ventas" name="permisos[]" value="reportes-ventas">
                            <label for="reportes-ventas">Reportes de ventas</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="reportes-compras" name="permisos[]" value="reportes-compras">
                            <label for="reportes-compras">Reportes de compras</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="reportes-inventario" name="permisos[]" value="reportes-inventario">
                            <label for="reportes-inventario">Reportes de inventario</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>USUARIOS</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="usuarios-crear" name="permisos[]" value="usuarios-crear">
                            <label for="usuarios-crear">Crear usuarios</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="usuarios-editar" name="permisos[]" value="usuarios-editar">
                            <label for="usuarios-editar">Editar usuarios</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="usuarios-eliminar" name="permisos[]" value="usuarios-eliminar">
                            <label for="usuarios-eliminar">Eliminar usuarios</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>Módulos adicionales</h3>
                <div class="permissions">
                    <div class="permission-group">
                        <h4>CLIENTES</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="clientes-ver" name="permisos[]" value="clientes-ver">
                            <label for="clientes-ver">Ver clientes</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="clientes-gestionar" name="permisos[]" value="clientes-gestionar">
                            <label for="clientes-gestionar">Gestionar clientes</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>PROVEEDORES</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="proveedores-ver" name="permisos[]" value="proveedores-ver">
                            <label for="proveedores-ver">Ver proveedores</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="proveedores-gestionar" name="permisos[]" value="proveedores-gestionar">
                            <label for="proveedores-gestionar">Gestionar proveedores</label>
                        </div>
                    </div>
                    
                    <div class="permission-group">
                        <h4>PRODUCTOS</h4>
                        <div class="permission-item">
                            <input type="checkbox" id="productos-ver" name="permisos[]" value="productos-ver">
                            <label for="productos-ver">Ver productos</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="productos-gestionar" name="permisos[]" value="productos-gestionar">
                            <label for="productos-gestionar">Gestionar productos</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="buttons">
                <button type="button" class="btn-secondary" onclick="window.location.href='menu-principal.html'">MENÚ PRINCIPAL</button>
                <button type="submit" class="btn-primary">CREAR USUARIO</button>
            </div>
        </form>
        
        <div id="statusMessage" class="status-message" style="display: none;"></div>
    </div>
    
    <script>
        // Obtener el nombre de usuario de la sesión (esto debería venir de tu sistema de autenticación)
        const currentUser = {
            name: "Administrador",
            username: "admin"
        };
        
        // Mostrar el nombre de usuario en la barra de navegación
        document.getElementById('displayUsername').textContent = currentUser.name + " (" + currentUser.username + ")";
        
        // Manejar el cierre de sesión
        document.getElementById('logoutBtn').addEventListener('click', function() {
            // Aquí deberías incluir la lógica para cerrar la sesión
            // Por ejemplo, redirigir a la página de login
            if(confirm('¿Estás seguro que deseas cerrar sesión?')) {
                // Limpiar datos de sesión si es necesario
                // localStorage.removeItem('userToken');
                
                // Redirigir a la página de login
                window.location.href = 'login.html';
            }
        });
        
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Simular envío del formulario
            const statusMessage = document.getElementById('statusMessage');
            statusMessage.style.display = 'block';
            
            // Aquí puedes agregar la lógica real de envío del formulario
            // Por ahora simulamos un envío exitoso
            statusMessage.textContent = "Usuario creado satisfactoriamente";
            statusMessage.className = "status-message success";
            
            // Para simular otros casos:
            // statusMessage.textContent = "Datos incorrectos o incompletos";
            // statusMessage.className = "status-message error";
            
            // statusMessage.textContent = "No tiene permisos para este módulo";
            // statusMessage.className = "status-message warning";
            
            // Limpiar el formulario después de 3 segundos
            setTimeout(() => {
                statusMessage.style.display = 'none';
                // this.reset(); // Descomentar para limpiar el formulario
            }, 3000);
        });
        
        // Opcional: Seleccionar/deseleccionar todos los permisos de un módulo
        document.querySelectorAll('.permission-group h4').forEach(header => {
            header.style.cursor = 'pointer';
            header.addEventListener('click', function() {
                const checkboxes = this.parentElement.querySelectorAll('input[type="checkbox"]');
                const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
                
                checkboxes.forEach(checkbox => {
                    checkbox.checked = !allChecked;
                });
            });
        });
    </script>
</body>
</html>